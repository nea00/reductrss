 name: Build and Push Docker Image

    on:
      push:
        branches:
          - main

    jobs:
      build:
        runs-on: ubuntu-latest

        steps:
            uses: actions/checkout@v2
            uses: docker/login-action@v1
            with:
              registry: ghcr.io
              username: ${{ github.actor }}
              token: ${{ secrets.REGISTRY_SECRET }}

          - name: Build Docker image
            run: |
              docker build -t ghcr.io/${{ github.repository }}/reductress-bsky-bot:latest .

          - name: Push Docker image
            run: |
              docker push ghcr.io/${{ github.repository }}/reductress-bsky-bot:latest